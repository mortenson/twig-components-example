(function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=2)})([function(){},function(e,t,n){(function(e){function n(e,t){for(var n,o=0,s=e.length-1;0<=s;s--)n=e[s],'.'===n?e.splice(s,1):'..'===n?(e.splice(s,1),o++):o&&(e.splice(s,1),o--);if(t)for(;o--;o)e.unshift('..');return e}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return s.exec(e).slice(1)};t.resolve=function(){for(var t,s='',r=!1,p=arguments.length-1;-1<=p&&!r;p--){if(t=0<=p?arguments[p]:e.cwd(),'string'!=typeof t)throw new TypeError('Arguments to path.resolve must be strings');else if(!t)continue;s=t+'/'+s,r='/'===t.charAt(0)}return s=n(o(s.split('/'),function(e){return!!e}),!r).join('/'),(r?'/':'')+s||'.'},t.normalize=function(e){var s=t.isAbsolute(e),r='/'===p(e,-1);return e=n(o(e.split('/'),function(e){return!!e}),!s).join('/'),e||s||(e='.'),e&&r&&(e+='/'),(s?'/':'')+e},t.isAbsolute=function(e){return'/'===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e){if('string'!=typeof e)throw new TypeError('Arguments to path.join must be strings');return e}).join('/'))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length&&''===e[t];t++);for(var n=e.length-1;0<=n&&''===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var s=o(e.split('/')),r=o(n.split('/')),p=Math.min(s.length,r.length),a=p,l=0;l<p;l++)if(s[l]!==r[l]){a=l;break}for(var i=[],l=a;l<s.length;l++)i.push('..');return i=i.concat(r.slice(a)),i.join('/')},t.sep='/',t.delimiter=':',t.dirname=function(e){var t=r(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):'.'},t.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return r(e)[3]};var p=function(e,t,n){return e.substr(t,n)}}).call(t,n(9))},function(e,t,n){n(3),n(4),e.exports=n(5)},function(){(function(){'use strict';window.WebComponents=window.WebComponents||{};var e='webcomponents-loader.js',t=[];if('import'in document.createElement('link')||t.push('hi'),(!('attachShadow'in Element.prototype&&'getRootNode'in Element.prototype)||window.ShadyDOM&&window.ShadyDOM.force)&&t.push('sd'),(!window.customElements||window.customElements.forcePolyfill)&&t.push('ce'),'content'in document.createElement('template')&&window.Promise&&Array.from&&document.createDocumentFragment().cloneNode()instanceof DocumentFragment||(t=['lite']),t.length){var n=document.querySelector('script[src*="'+e+'"]'),o=document.createElement('script'),s='webcomponents-'+t.join('-')+'.js',r=n.src.replace(e,s);o.src=r,'loading'===document.readyState&&'import'in document.createElement('link')?document.write(o.outerHTML):document.head.appendChild(o)}else{var p=function(){requestAnimationFrame(function(){window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent('WebComponentsReady',{bubbles:!0}))})};'loading'===document.readyState?document.addEventListener('readystatechange',function e(){p(),document.removeEventListener('readystatechange',e)}):p()}})()},function(){(function(){'use strict';(()=>{if(!window.customElements)return;const t=window.HTMLElement,n=window.customElements.define,o=window.customElements.get,s=new Map,r=new Map;let e=!1,p=!1;window.HTMLElement=function(){if(!e){const t=s.get(this.constructor),n=o.call(window.customElements,t);p=!0;const r=new n;return r}e=!1},window.HTMLElement.prototype=t.prototype,Object.defineProperty(window,'customElements',{value:window.customElements,configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'define',{value:(o,a)=>{const l=a.prototype,i=class extends t{constructor(){super(),Object.setPrototypeOf(this,l),p||(e=!0,a.call(this)),p=!1}},c=i.prototype;i.observedAttributes=a.observedAttributes,c.connectedCallback=l.connectedCallback,c.disconnectedCallback=l.disconnectedCallback,c.attributeChangedCallback=l.attributeChangedCallback,c.adoptedCallback=l.adoptedCallback,s.set(a,o),r.set(o,a),n.call(window.customElements,o,i)},configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'get',{value:(e)=>r.get(e),configurable:!0,writable:!0})})()})()},function(e,t,n){'use strict';var o=n(6),s=function(e){return e&&e.__esModule?e:{default:e}}(o);customElements.define('tce-hero',s.default)},function(e,t,n){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function s(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function r(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var p=function(){function e(e,t){for(var n,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(7),a=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),p(t,[{key:'getTemplate',value:function(){return n(10)}}],[{key:'observedAttributes',get:function(){return['src','text','subtext','callout-text','callout-href','align']}}]),t}(a.default);t.default=l},function(e,t,n){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function s(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function r(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var p=function(){function e(e,t){for(var n,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(8),a=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(){o(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attachShadow({mode:'open'}),e}return r(t,e),p(t,null,[{key:'observedAttributes',get:function(){return[]}}]),p(t,[{key:'connectedCallback',value:function(){this.render()}},{key:'attributeChangedCallback',value:function(){this.render()}},{key:'getTemplate',value:function(){return''}},{key:'getTemplateVariables',value:function(){var e=this,t={};return this.constructor.observedAttributes.forEach(function(n){e.hasAttribute(n)&&(t[n.replace('-','_')]=e.getAttribute(n))}),t}},{key:'renderTemplate',value:function(e){return a.default.twig({data:this.getTemplate()}).render(e)}},{key:'render',value:function(){this.shadowRoot.innerHTML=this.renderTemplate(this.getTemplateVariables())}}]),t}(HTMLElement);t.default=l},function(e,t,n){(function(t){(function(t,o){e.exports=o(function(){try{return n(0)}catch(t){}}(),n(1))})(this,function(){var e=String.fromCharCode,o=Math.round,s=Math.pow,r=Math.max,p=Math.floor,l=Math.abs;return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p='',t(0)}([function(e,t,n){/**
	 * Twig.js
	 *
	 * @copyright 2011-2016 John Roepke and the Twig.js Contributors
	 * @license   Available under the BSD 2-Clause License
	 * @link      https://github.com/twigjs/twig.js
	 */var o={VERSION:'0.10.2'};n(1)(o),n(2)(o),n(3)(o),n(5)(o),n(6)(o),n(7)(o),n(17)(o),n(18)(o),n(21)(o),n(22)(o),n(23)(o),n(24)(o),n(25)(o),n(26)(o),n(27)(o),e.exports=o.exports},function(e){e.exports=function(e){'use strict';function t(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e}return e.trace=!1,e.debug=!1,e.cache=!0,e.noop=function(){},e.placeholders={parent:'{{|PARENT|}}'},e.indexOf=function(e,o){if(Array.prototype.hasOwnProperty('indexOf'))return e.indexOf(o);if(void 0===e||null===e)throw new TypeError;var s=Object(e),t=s.length>>>0;if(0==t)return-1;var i=0;if(0<arguments.length&&(i=+arguments[1],i===i?0!==i&&i!==Infinity&&i!==-Infinity&&(i=(0<i||-1)*p(l(i))):i=0),i>=t)return-1;for(var n=0<=i?i:r(t-l(i),0);n<t;n++)if(n in s&&s[n]===o)return n;return e==o?0:-1},e.forEach=function(e,t,n){if(Array.prototype.forEach)return e.forEach(t,n);var o,s;if(null==e)throw new TypeError(' this is null or not defined');var r=Object(e),p=r.length>>>0;if('[object Function]'!={}.toString.call(t))throw new TypeError(t+' is not a function');for(n&&(o=n),s=0;s<p;){var i;s in r&&(i=r[s],t.call(o,i,s,r)),s++}},e.merge=function(t,n,o){return e.forEach(Object.keys(n),function(e){o&&!(e in t)||(t[e]=n[e])}),t},e.Error=function(e,t){this.message=e,this.name='TwigException',this.type='TwigException',this.file=t},e.Error.prototype.toString=function(){var e=this.name+': '+this.message;return e},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},'undefined'==typeof console?e.log.error=function(){}:'undefined'==typeof console.error?'undefined'!=typeof console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){console.error.apply(console,arguments)},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:'output',logic:'logic',comment:'comment',raw:'raw',output_whitespace_pre:'output_whitespace_pre',output_whitespace_post:'output_whitespace_post',output_whitespace_both:'output_whitespace_both',logic_whitespace_pre:'logic_whitespace_pre',logic_whitespace_post:'logic_whitespace_post',logic_whitespace_both:'logic_whitespace_both'},e.token.definitions=[{type:e.token.type.raw,open:'{% raw %}',close:'{% endraw %}'},{type:e.token.type.raw,open:'{% verbatim %}',close:'{% endverbatim %}'},{type:e.token.type.output_whitespace_pre,open:'{{-',close:'}}'},{type:e.token.type.output_whitespace_post,open:'{{',close:'-}}'},{type:e.token.type.output_whitespace_both,open:'{{-',close:'-}}'},{type:e.token.type.logic_whitespace_pre,open:'{%-',close:'%}'},{type:e.token.type.logic_whitespace_post,open:'{%',close:'-%}'},{type:e.token.type.logic_whitespace_both,open:'{%-',close:'-%}'},{type:e.token.type.output,open:'{{',close:'}}'},{type:e.token.type.logic,open:'{%',close:'%}'},{type:e.token.type.comment,open:'{#',close:'#}'}],e.token.strings=['"','\''],e.token.findStart=function(t){var n,o,s,r,p={position:null,close_position:null,def:null};for(n=0;n<e.token.definitions.length;n++)(o=e.token.definitions[n],s=t.indexOf(o.open),r=t.indexOf(o.close),e.log.trace('Twig.token.findStart: ','Searching for ',o.open,' found at ',s),!(0<=s&&o.open.length!==o.close.length&&0>r))&&(0<=s&&(null===p.position||s<p.position)?(p.position=s,p.def=o,p.close_position=r):0<=s&&null!==p.position&&s===p.position&&(o.open.length>p.def.open.length?(p.position=s,p.def=o,p.close_position=r):o.open.length===p.def.open.length&&(o.close.length>p.def.close.length?0<=r&&r<p.close_position&&(p.position=s,p.def=o,p.close_position=r):0<=r&&r<p.close_position&&(p.position=s,p.def=o,p.close_position=r))));return delete p.close_position,p},e.token.findEnd=function(t,n,o){for(var s,r,p=null,i=!1,a=0,l=null,c=null,d=null,u=null,y=null,h=null;!i;){if(l=null,c=null,d=t.indexOf(n.close,a),0<=d)p=d,i=!0;else throw new e.Error('Unable to find closing bracket \''+n.close+'\' opened near template position '+o);if(n.type===e.token.type.comment)break;if(n.type===e.token.type.raw)break;for(r=e.token.strings.length,s=0;s<r;s+=1)y=t.indexOf(e.token.strings[s],a),0<y&&y<d&&(null==l||y<l)&&(l=y,c=e.token.strings[s]);if(null!==l)for(u=l+1,p=null,i=!1;;){if(h=t.indexOf(c,u),0>h)throw'Unclosed string in template';if('\\'!==t.substr(h-1,1)){a=h+1;break}else u=h+1}}return p},e.tokenize=function(t){for(var n=[],o=0,s=null,r=null;0<t.length;)if(s=e.token.findStart(t),e.log.trace('Twig.tokenize: ','Found token: ',s),null!==s.position){if(0<s.position&&n.push({type:e.token.type.raw,value:t.substring(0,s.position)}),t=t.substr(s.position+s.def.open.length),o+=s.position+s.def.open.length,r=e.token.findEnd(t,s.def,o),e.log.trace('Twig.tokenize: ','Token ends at ',r),n.push({type:s.def.type,value:t.substring(0,r).trim()}),'\n'===t.substr(r+s.def.close.length,1))switch(s.def.type){case'logic_whitespace_pre':case'logic_whitespace_post':case'logic_whitespace_both':case'logic':r+=1;}t=t.substr(r+s.def.close.length),o+=r+s.def.close.length}else n.push({type:e.token.type.raw,value:t}),t='';return n},e.compile=function(t){try{for(var n=[],o=[],s=[],r=null,p=null,i=null,a=null,l=null,c=null,d=null,u=null,y=null,h=null,g=null,m=null,f=function(t){e.expression.compile.apply(this,[t]),0<o.length?s.push(t):n.push(t)},x=function(t){if(p=e.logic.compile.apply(this,[t]),h=p.type,g=e.logic.handler[h].open,m=e.logic.handler[h].next,e.log.trace('Twig.compile: ','Compiled logic token to ',p,' next is: ',m,' open is : ',g),void 0!==g&&!g){if(a=o.pop(),d=e.logic.handler[a.type],0>e.indexOf(d.next,h))throw new Error(h+' not expected after a '+a.type);a.output=a.output||[],a.output=a.output.concat(s),s=[],y={type:e.token.type.logic,token:a},0<o.length?s.push(y):n.push(y)}void 0!==m&&0<m.length?(e.log.trace('Twig.compile: ','Pushing ',p,' to logic stack.'),0<o.length&&(a=o.pop(),a.output=a.output||[],a.output=a.output.concat(s),o.push(a),s=[]),o.push(p)):void 0!==g&&g&&(y={type:e.token.type.logic,token:p},0<o.length?s.push(y):n.push(y))};0<t.length;){switch(r=t.shift(),l=n[n.length-1],c=s[s.length-1],u=t[0],e.log.trace('Compiling token ',r),r.type){case e.token.type.raw:0<o.length?s.push(r):n.push(r);break;case e.token.type.logic:x.call(this,r);break;case e.token.type.comment:break;case e.token.type.output:f.call(this,r);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(r.type!==e.token.type.output_whitespace_post&&r.type!==e.token.type.logic_whitespace_post&&(l&&l.type===e.token.type.raw&&(n.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),n.push(l))),c&&c.type===e.token.type.raw&&(s.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),s.push(c)))),r.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:f.call(this,r);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:x.call(this,r);}r.type!==e.token.type.output_whitespace_pre&&r.type!==e.token.type.logic_whitespace_pre&&u&&u.type===e.token.type.raw&&(t.shift(),null===u.value.match(/^\s*$/)&&(u.value=u.value.trim(),t.unshift(u)));}e.log.trace('Twig.compile: ',' Output: ',n,' Logic Stack: ',o,' Pending Output: ',s)}if(0<o.length)throw i=o.pop(),new Error('Unable to find an end tag for '+i.type+', expecting one of '+i.next);return n}catch(t){if(this.options.rethrow)throw'TwigException'!=t.type||t.file||(t.file=this.id),t;else e.log.error('Error compiling twig template '+this.id+': '),t.stack?e.log.error(t.stack):e.log.error(t.toString())}},e.parse=function(t,n,o){function s(t){if(r.options.rethrow)throw'string'==typeof t&&(t=new e.Error(t)),'TwigException'!=t.type||t.file||(t.file=r.id),t;else if(e.log.error('Error parsing twig template '+r.id+': '),t.stack?e.log.error(t.stack):e.log.error(t.toString()),e.debug)return t.toString()}var r=this,p=[],i=null,a=!0,l=null,c=!0;if(l=e.async.forEach(t,function(t){switch(e.log.debug('Twig.parse: ','Parsing token: ',t),t.type){case e.token.type.raw:p.push(e.filters.raw(t.value));break;case e.token.type.logic:var o=t.token;return e.logic.parseAsync.apply(r,[o,n,c]).then(function(e){void 0!==e.chain&&(c=e.chain),void 0!==e.context&&(n=e.context),void 0!==e.output&&p.push(e.output)});break;case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:return e.log.debug('Twig.parse: ','Output token: ',t.stack),e.expression.parseAsync.apply(r,[t.stack,n]).then(function(e){p.push(e)});}}).then(function(){return p=e.output.apply(r,[p]),a=!1,p}).catch(function(t){o&&s(t),i=t}),o)return l;if(null!==i)return s(i);if(a)throw new e.Error('You are using Twig.js in sync mode in combination with async extensions.');return p},e.prepare=function(t){var n,o;return e.log.debug('Twig.prepare: ','Tokenizing ',t),o=e.tokenize.apply(this,[t]),e.log.debug('Twig.prepare: ','Compiling ',o),n=e.compile.apply(this,[o]),e.log.debug('Twig.prepare: ','Compiled ',n),n},e.output=function(t){if(!this.options.autoescape)return t.join('');var n='html';'string'==typeof this.options.autoescape&&(n=this.options.autoescape);var o=[];return e.forEach(t,function(t){t&&!0!==t.twig_markup&&t.twig_markup!=n&&(t=e.filters.escape(t,[n])),o.push(t)}),e.Markup(o.join(''))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if('prototype'===t)throw new e.Error(t+' is not a valid twig identifier');else if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error('There is already a template with the ID '+t);return!0},e.Templates.registerLoader=function(t,n,o){if('function'!=typeof n)throw new e.Error('Unable to add loader for '+t+': Invalid function reference given.');o&&(n=n.bind(o)),this.loaders[t]=n},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,n,o){if('function'!=typeof n)throw new e.Error('Unable to add parser for '+t+': Invalid function regerence given.');o&&(n=n.bind(o)),this.parsers[t]=n},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error('Unable to save template with no id');e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,n,o){var s;return(void 0===n.async&&(n.async=!0),void 0===n.id&&(n.id=t),e.cache&&e.Templates.registry.hasOwnProperty(n.id))?('function'==typeof o&&o(e.Templates.registry[n.id]),e.Templates.registry[n.id]):(n.parser=n.parser||'twig',s=this.loaders[n.method]||this.loaders.fs,s.apply(this,arguments))},e.Template=function(n){var o=n.data,s=n.id,r=n.blocks,p=n.macros||{},i=n.base,a=n.path,l=n.url,c=n.name,d=n.method,u=n.options;this.id=s,this.method=d,this.base=i,this.path=a,this.url=l,this.name=c,this.macros=p,this.options=u,this.reset(r),this.tokens=t('String',o)?e.prepare.apply(this,[o]):o,void 0!==s&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug('Twig.Template.reset','Reseting template '+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,n,o){n=n||{};var s,r,p=this,i=null,a=!0,l=null;this.context=t||{},this.reset(),n.blocks&&(this.blocks=n.blocks),n.macros&&(this.macros=n.macros);if(l=e.parseAsync.apply(this,[this.tokens,this.context]).then(function(t){if(p.extend){var o;return p.options.allowInlineIncludes&&(o=e.Templates.load(p.extend),o&&(o.options=p.options)),o||(r=e.path.parsePath(p,p.extend),o=e.Templates.loadRemote(r,{method:p.getLoaderMethod(),base:p.base,async:!1,id:r,options:p.options})),p.parent=o,p.parent.renderAsync(p.context,{blocks:p.blocks})}return'blocks'==n.output?p.blocks:'macros'==n.output?p.macros:t}).then(function(e){return a=!1,s=e,e}).catch(function(t){if(o)throw t;i=t}),o)return l;if(null!==i)throw i;if(a)throw new e.Error('You are using Twig.js in sync mode in combination with async extensions.');return s},e.Template.prototype.importFile=function(t){var n,o;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?e.path.parsePath(this,t):t,o=e.Templates.load(t),!o&&(o=e.Templates.loadRemote(n,{id:t,method:this.getLoaderMethod(),async:!1,path:t,options:this.options}),!o))throw new e.Error('Unable to find the template '+t);return o.options=this.options,o}return n=e.path.parsePath(this,t),o=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:n}),o},e.Template.prototype.importBlocks=function(t,n){var o=this.importFile(t),s=this.context,r=this;n=n||!1,o.render(s),e.forEach(Object.keys(o.blocks),function(e){(n||void 0===r.blocks[e])&&(r.blocks[e]=o.blocks[e],r.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var n=e.path.parsePath(this,t),o=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),async:!1,id:n});return o},e.Template.prototype.getLoaderMethod=function(){return this.path?'fs':this.url?'ajax':this.method||'fs'},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return'undefined'==typeof t&&(t=!0),'string'==typeof e&&0<e.length&&(e=new String(e),e.twig_markup=t),e},e}},function(e){e.exports=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,n){var o,s=JSON.stringify(t.tokens),r=t.id;if(n.module){if(void 0===e.compiler.module[n.module])throw new e.Error('Unable to find module type '+n.module);o=e.compiler.module[n.module](r,s,n.twig)}else o=e.compiler.wrap(r,s);return o},e.compiler.module={amd:function(t,n,o){return'define(["'+o+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,n)+'\n\treturn templates;\n});'},node:function(t,n){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,n)},cjs2:function(t,n,o){return'module.declare([{ twig: "'+o+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+e.compiler.wrap(t,n)+'\n});'}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+', precompiled: true});\n'},e}},function(e,t,n){e.exports=function(e){'use strict';function t(t,n,o){return n?e.expression.parseAsync.apply(t,[n,o]):e.Promise.resolve(!1)}for(e.expression={},n(4)(e),e.expression.reservedWords=['true','false','null','TRUE','FALSE','NULL','_context','and','b-and','or','b-or','b-xor','in','not in','if'],e.expression.type={comma:'Twig.expression.type.comma',operator:{unary:'Twig.expression.type.operator.unary',binary:'Twig.expression.type.operator.binary'},string:'Twig.expression.type.string',bool:'Twig.expression.type.bool',slice:'Twig.expression.type.slice',array:{start:'Twig.expression.type.array.start',end:'Twig.expression.type.array.end'},object:{start:'Twig.expression.type.object.start',end:'Twig.expression.type.object.end'},parameter:{start:'Twig.expression.type.parameter.start',end:'Twig.expression.type.parameter.end'},subexpression:{start:'Twig.expression.type.subexpression.start',end:'Twig.expression.type.subexpression.end'},key:{period:'Twig.expression.type.key.period',brackets:'Twig.expression.type.key.brackets'},filter:'Twig.expression.type.filter',_function:'Twig.expression.type._function',variable:'Twig.expression.type.variable',number:'Twig.expression.type.number',_null:'Twig.expression.type.null',context:'Twig.expression.type.context',test:'Twig.expression.type.test'},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.subexpression.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start,e.expression.type.subexpression.start,e.expression.type.operator.unary]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets,e.expression.type.slice]),e.expression.fn={compile:{push:function(e,t,n){n.push(e)},push_both:function(e,t,n){n.push(e),t.push(e)}},parse:{push:function(e,t){t.push(e)},push_value:function(e,t){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*(\s?as)?)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,n.push(e)},parse:function(n,o,s){var r=o.pop();return t(this,n.params,s).then(function(t){var s=e.test(n.filter,r,t);'not'==n.modifier?o.push(!s):o.push(s)})}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,n,o){var s,r=n.length-1;for(delete t.match,delete t.value;0<=r;r--){if(s=n.pop(),s.type===e.expression.type.object.start||s.type===e.expression.type.parameter.start||s.type===e.expression.type.array.start){n.push(s);break}o.push(s)}o.push(t)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,n){e.value=+e.value,n.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.operator.binary,regex:/(^\?\:|^(b\-and)|^(b\-or)|^(b\-xor)|^[\+\-~%\?]|^[\:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[\(|\s+]|^(or)[\(|\s+]|^(in)[\(|\s+]|^(not in)[\(|\s+]|^\.\.)/,next:e.expression.set.expressions,transform:function(e,t){switch(e[0]){case'and(':case'or(':case'in(':case'not in(':return t[t.length-1].value=e[2],e[0];break;default:return'';}},compile:function(t,n,o){delete t.match,t.value=t.value.trim();var s=t.value,r=e.expression.operator.lookup(s,t);for(e.log.trace('Twig.expression.compile: ','Operator: ',r,' from ',s);0<n.length&&(n[n.length-1].type==e.expression.type.operator.unary||n[n.length-1].type==e.expression.type.operator.binary)&&(r.associativity===e.expression.operator.leftToRight&&r.precidence>=n[n.length-1].precidence||r.associativity===e.expression.operator.rightToLeft&&r.precidence>n[n.length-1].precidence);){var p=n.pop();o.push(p)}if(':'!==s)n.push(r);else if(n[n.length-1]&&'?'===n[n.length-1].value);else{var i=o.pop();if(i.type===e.expression.type.string||i.type===e.expression.type.variable)t.key=i.value;else if(i.type===e.expression.type.number)t.key=i.value.toString();else if(i.expression&&(i.type===e.expression.type.parameter.end||i.type==e.expression.type.subexpression.end))t.params=i.params;else throw new e.Error('Unexpected value before \':\' of '+i.type+' = '+i.value);return void o.push(t)}},parse:function(t,n,o){if(t.key)n.push(t);else{if(t.params)return e.expression.parseAsync.apply(this,[t.params,o]).then(function(e){t.key=e,n.push(t),o.loop||delete t.params});e.expression.operator.parse(t.value,n)}}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,n,o){delete t.match,t.value=t.value.trim();var s=t.value,r=e.expression.operator.lookup(s,t);for(e.log.trace('Twig.expression.compile: ','Operator: ',r,' from ',s);0<n.length&&(n[n.length-1].type==e.expression.type.operator.unary||n[n.length-1].type==e.expression.type.operator.binary)&&(r.associativity===e.expression.operator.leftToRight&&r.precidence>=n[n.length-1].precidence||r.associativity===e.expression.operator.rightToLeft&&r.precidence>n[n.length-1].precidence);){var p=n.pop();o.push(p)}n.push(r)},parse:function(t,n){e.expression.operator.parse(t.value,n)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations_extended,compile:function(t,n,o){var s=t.value;delete t.match,s='"'===s.substring(0,1)?s.replace('\\"','"'):s.replace('\\\'','\''),t.value=s.substring(1,s.length-1).replace(/\\n/g,'\n').replace(/\\r/g,'\r'),e.log.trace('Twig.expression.compile: ','String value: ',t.value),o.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.subexpression.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.subexpression.end]),compile:function(e,t,n){e.value='(',n.push(e),t.push(e)},parse:e.expression.fn.parse.push},{type:e.expression.type.subexpression.end,regex:/^\)/,next:e.expression.set.operations_extended,validate:function(t,n){for(var o,s=n.length-1,r=!1,p=!1,i=0;!r&&0<=s;)o=n[s],r=o.type===e.expression.type.subexpression.start,r&&p&&(p=!1,r=!1),o.type===e.expression.type.parameter.start?i++:o.type===e.expression.type.parameter.end?i--:o.type===e.expression.type.subexpression.end&&(p=!0),s--;return r&&0==i},compile:function(t,n,o){var s,r=t;for(s=n.pop();0<n.length&&s.type!=e.expression.type.subexpression.start;)o.push(s),s=n.pop();for(var p=[];t.type!==e.expression.type.subexpression.start;)p.unshift(t),t=o.pop();p.unshift(t);s=n[n.length-1],void 0===s||s.type!==e.expression.type._function&&s.type!==e.expression.type.filter&&s.type!==e.expression.type.test&&s.type!==e.expression.type.key.brackets?(r.expression=!0,p.pop(),p.shift(),r.params=p,o.push(r)):(r.expression=!1,s.params=p)},parse:function(t,n,o){if(t.expression)return e.expression.parseAsync.apply(this,[t.params,o]).then(function(e){n.push(e)});throw new e.Error('Unexpected subexpression end when token is not marked as an expression')}},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),validate:function(t,n){var o=n[n.length-1];return o&&0>e.indexOf(e.expression.reservedWords,o.value.trim())},compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,n,o){var s,r=t;for(s=n.pop();0<n.length&&s.type!=e.expression.type.parameter.start;)o.push(s),s=n.pop();for(var p=[];t.type!==e.expression.type.parameter.start;)p.unshift(t),t=o.pop();p.unshift(t);t=o[o.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets?(r.expression=!0,p.pop(),p.shift(),r.params=p,o.push(r)):(r.expression=!1,t.params=p)},parse:function(t,n,o){var s=[],r=!1,p=null;if(t.expression)return e.expression.parseAsync.apply(this,[t.params,o]).then(function(e){n.push(e)});for(;0<n.length;){if(p=n.pop(),p&&p.type&&p.type==e.expression.type.parameter.start){r=!0;break}s.unshift(p)}if(!r)throw new e.Error('Expected end of parameter set.');n.push(s)}},{type:e.expression.type.slice,regex:/^\[(\d*\:\d*)\]/,next:e.expression.set.operations_extended,compile:function(e,t,n){var o=e.match[1].split(':'),s=o[0]?parseInt(o[0]):void 0,r=o[1]?parseInt(o[1]):void 0;e.value='slice',e.params=[s,r],r||(e.params=[s]),n.push(e)},parse:function(t,n){var o=n.pop(),s=t.params;n.push(e.filter.apply(this,[t.value,o,s]))}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,n,o){for(var s,r=n.length-1;0<=r&&(s=n.pop(),s.type!==e.expression.type.array.start);r--)o.push(s);o.push(t)},parse:function(t,n){for(var o=[],s=!1,r=null;0<n.length;){if(r=n.pop(),r.type&&r.type==e.expression.type.array.start){s=!0;break}o.unshift(r)}if(!s)throw new e.Error('Expected end of array.');n.push(o)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,n,o){for(var s,r=n.length-1;0<=r&&(s=n.pop(),!(s&&s.type===e.expression.type.object.start));r--)o.push(s);o.push(t)},parse:function(t,n){for(var o={},s=!1,r=null,p=!1,i=null;0<n.length;){if(r=n.pop(),r&&r.type&&r.type===e.expression.type.object.start){s=!0;break}if(r&&r.type&&(r.type===e.expression.type.operator.binary||r.type===e.expression.type.operator.unary)&&r.key){if(!p)throw new e.Error('Missing value for key \''+r.key+'\' in object definition.');o[r.key]=i,void 0===o._keys&&(o._keys=[]),o._keys.unshift(r.key),i=null,p=!1}else p=!0,i=r}if(!s)throw new e.Error('Unexpected end of object.');n.push(o)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.value=e.match[1],n.push(e)},parse:function(n,o,s){var r=this,p=o.pop();return t(this,n.params,s).then(function(t){return e.filter.apply(r,[n.value,p,t])}).then(function(e){o.push(e)})}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,validate:function(t){return t[1]&&0>e.indexOf(e.expression.reservedWords,t[1])},transform:function(){return'('},compile:function(e,t,n){var o=e.match[1];e.fn=o,delete e.match,delete e.value,n.push(e)},parse:function(n,o,s){var r,p=this,i=n.fn;return t(this,n.params,s).then(function(t){if(e.functions[i])r=e.functions[i].apply(p,t);else if('function'==typeof s[i])r=s[i].apply(s,t);else throw new e.Error(i+' function does not exist and is not defined in the context');return r}).then(function(e){o.push(e)})}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t){return 0>e.indexOf(e.expression.reservedWords,t[0])},parse:function(t,n,o){return e.expression.resolveAsync.apply(this,[o[t.value],o]).then(function(e){n.push(e)})}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,n){e.key=e.match[1],delete e.match,delete e.value,n.push(e)},parse:function(n,o,s,r){var p,i=this,a=n.key,l=o.pop();return t(this,n.params,s).then(function(t){if(null!==l&&void 0!==l){var n=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};p='object'==typeof l&&(a in l)?l[a]:void 0===l['get'+n(a)]?void 0===l['is'+n(a)]?void 0:l['is'+n(a)]:l['get'+n(a)]}else if(i.options.strict_variables)throw new e.Error('Can\'t access a key '+a+' on an null or undefined object.');else p=void 0;return e.expression.resolveAsync.apply(i,[p,s,t,r,l])}).then(function(e){o.push(e)})}},{type:e.expression.type.key.brackets,regex:/^\[([^\]\:]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,n,o){var s=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:s}).stack,o.push(t)},parse:function(n,o,s,r){var p,i,a=this,l=null;return t(this,n.params,s).then(function(t){return l=t,e.expression.parseAsync.apply(a,[n.stack,s])}).then(function(t){if(p=o.pop(),null===p||void 0===p)if(a.options.strict_variables)throw new e.Error('Can\'t access a key '+t+' on an null or undefined object.');else return null;return i='object'==typeof p&&(t in p)?p[t]:null,e.expression.resolveAsync.apply(a,[i,p,l,r])}).then(function(e){o.push(e)})}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,n){delete e.match,e.value=null,n.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,n){t.push(n)}},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,n){e.value='true'===e.match[0].toLowerCase(),delete e.match,n.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolveAsync=function(t,n,o,s,r){if('function'==typeof t){var p=e.Promise.resolve(o);if(s&&s.type===e.expression.type.parameter.end){p=p.then(function(){return s.params&&e.expression.parseAsync.apply(this,[s.params,n,!0])}).then(function(e){return s.cleanup=!0,e})}return p.then(function(e){return t.apply(r||n,e||[])})}return e.Promise.resolve(t)},e.expression.resolve=function(t,n,o,s,r){var p,i=!0;if(e.expression.resolveAsync.apply(this,[t,n,o,s,r]).then(function(e){i=!1,p=e}),i)throw new e.Error('You are using Twig.js in sync mode in combination with async extensions.');return p},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]='Twig.expression.type.'+t},e.expression.extend=function(t){if(!t.type)throw new e.Error('Unable to extend logic definition. No type provided for '+t);e.expression.handler[t.type]=t};0<e.expression.definitions.length;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var n,o,s,r,p,i,a=[],l=0,c=null,d=[];for(i=function(){var t=Array.prototype.slice.apply(arguments),o=t.pop(),s=t.pop();return(e.log.trace('Twig.expression.tokenize','Matched a ',n,' regular expression of ',t),c&&0>e.indexOf(c,n))?(d.push(n+' cannot follow a '+a[a.length-1].type+' at template:'+l+' near \''+t[0].substring(0,20)+'...\''),t[0]):e.expression.handler[n].validate&&!e.expression.handler[n].validate(t,a)?t[0]:(d=[],a.push({type:n,value:t[0],match:t}),p=!0,c=r,l+=t[0].length,e.expression.handler[n].transform?e.expression.handler[n].transform(t,a):'')},e.log.debug('Twig.expression.tokenize','Tokenizing expression ',t);0<t.length;){for(n in t=t.trim(),e.expression.handler)if(e.expression.handler.hasOwnProperty(n)){for(r=e.expression.handler[n].next,o=e.expression.handler[n].regex,e.log.trace('Checking type ',n,' on ',t),s=o instanceof Array?o:[o],p=!1;0<s.length;)o=s.pop(),t=t.replace(o,i);if(p)break}if(!p)if(0<d.length)throw new e.Error(d.join(' OR '));else throw new e.Error('Unable to parse \''+t+'\' at template position'+l)}return e.log.trace('Twig.expression.tokenize','Tokenized to ',a),a},e.expression.compile=function(t){var n=t.value,o=e.expression.tokenize(n),s=null,r=[],p=[],i=null;for(e.log.trace('Twig.expression.compile: ','Compiling ',n);0<o.length;)s=o.shift(),i=e.expression.handler[s.type],e.log.trace('Twig.expression.compile: ','Compiling ',s),i.compile&&i.compile(s,p,r),e.log.trace('Twig.expression.compile: ','Stack is',p),e.log.trace('Twig.expression.compile: ','Output is',r);for(;0<p.length;)r.push(p.pop());return e.log.trace('Twig.expression.compile: ','Final output is',r),t.stack=r,delete t.value,t},e.expression.parse=function(t,n,o,s){var r=this;t instanceof Array||(t=[t]);var p,i=[],a=null,l=!0,c=null,d=[];if(a=e.async.forEach(t,function(o,s){if(!o.cleanup){var a=null;return t.length>s+1&&(p=t[s+1]),c=e.expression.handler[o.type],c.parse&&(a=c.parse.apply(r,[o,i,n,p])),n.loop&&o.type===e.expression.type.operator.binary&&d.push(o),a}}).then(function(){if(e.forEach(d,function(e){e.params&&e.key&&delete e.key}),o){for(var t=[];0<i.length;)t.unshift(i.pop());i.push(t)}return s?e.Promise.resolve(i.pop()):void 0}).then(function(e){return l=!1,e}),s)return a;if(l)throw new e.Error('You are using Twig.js in sync mode in combination with async extensions.');return i.pop()},e}},function(e){e.exports=function(e){'use strict';e.expression.operator={leftToRight:'leftToRight',rightToLeft:'rightToLeft'};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||''!==e&&-1<t.indexOf(e);for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return!0;return!1};return e.expression.operator.lookup=function(t,n){switch(t){case'..':n.precidence=20,n.associativity=e.expression.operator.leftToRight;break;case',':n.precidence=18,n.associativity=e.expression.operator.leftToRight;break;case'?:':case'?':case':':n.precidence=16,n.associativity=e.expression.operator.rightToLeft;break;case'or':n.precidence=14,n.associativity=e.expression.operator.leftToRight;break;case'and':n.precidence=13,n.associativity=e.expression.operator.leftToRight;break;case'b-or':n.precidence=12,n.associativity=e.expression.operator.leftToRight;break;case'b-xor':n.precidence=11,n.associativity=e.expression.operator.leftToRight;break;case'b-and':n.precidence=10,n.associativity=e.expression.operator.leftToRight;break;case'==':case'!=':n.precidence=9,n.associativity=e.expression.operator.leftToRight;break;case'<':case'<=':case'>':case'>=':case'not in':case'in':n.precidence=8,n.associativity=e.expression.operator.leftToRight;break;case'~':case'+':case'-':n.precidence=6,n.associativity=e.expression.operator.leftToRight;break;case'//':case'**':case'*':case'/':case'%':n.precidence=5,n.associativity=e.expression.operator.leftToRight;break;case'not':n.precidence=3,n.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error('Failed to lookup operator: '+t+' is an unknown operator.');}return n.operator=t,n},e.expression.operator.parse=function(n,o){e.log.trace('Twig.expression.operator.parse: ','Handling ',n);var r,i,a;switch('?'===n&&(a=o.pop()),i=o.pop(),'not'!==n&&(r=o.pop()),'in'!==n&&'not in'!==n&&(r&&Array.isArray(r)&&(r=r.length),i&&Array.isArray(i)&&(i=i.length)),n){case':':break;case'?:':e.lib.boolval(r)?o.push(r):o.push(i);break;case'?':void 0===r&&(r=i,i=a,a=void 0),e.lib.boolval(r)?o.push(i):o.push(a);break;case'+':i=parseFloat(i),r=parseFloat(r),o.push(r+i);break;case'-':i=parseFloat(i),r=parseFloat(r),o.push(r-i);break;case'*':i=parseFloat(i),r=parseFloat(r),o.push(r*i);break;case'/':i=parseFloat(i),r=parseFloat(r),o.push(r/i);break;case'//':i=parseFloat(i),r=parseFloat(r),o.push(p(r/i));break;case'%':i=parseFloat(i),r=parseFloat(r),o.push(r%i);break;case'~':o.push((null==r?'':r.toString())+(null==i?'':i.toString()));break;case'not':case'!':o.push(!e.lib.boolval(i));break;case'<':o.push(r<i);break;case'<=':o.push(r<=i);break;case'>':o.push(r>i);break;case'>=':o.push(r>=i);break;case'===':o.push(r===i);break;case'==':o.push(r==i);break;case'!==':o.push(r!==i);break;case'!=':o.push(r!=i);break;case'or':o.push(r||i);break;case'b-or':o.push(r|i);break;case'b-xor':o.push(r^i);break;case'and':o.push(r&&i);break;case'b-and':o.push(r&i);break;case'**':o.push(s(r,i));break;case'not in':o.push(!t(r,i));break;case'in':o.push(t(r,i));break;case'..':o.push(e.functions.range(r,i));break;default:debugger;throw new e.Error('Failed to parse operator: '+n+' is an unknown operator.');}},e}},function(e){e.exports=function(e){function t(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e}return e.filters={upper:function(e){return'string'==typeof e?e.toUpperCase():e},lower:function(e){return'string'==typeof e?e.toLowerCase():e},capitalize:function(e){return'string'==typeof e?e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1):e},title:function(e){return'string'==typeof e?e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()}):e},length:function(t){return e.lib.is('Array',t)||'string'==typeof t?t.length:e.lib.is('Object',t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t('Array',e))return e.reverse();if(t('String',e))return e.split('').reverse().join('');if(t('Object',e)){var n=e._keys||Object.keys(e).reverse();return e._keys=n,e}},sort:function(e){if(t('Array',e))return e.sort();if(t('Object',e)){delete e._keys;var n=Object.keys(e),o=n.sort(function(t,n){var o;return e[t]>e[n]==!(e[t]<=e[n])?e[t]>e[n]?1:e[t]<e[n]?-1:0:isNaN(o=parseFloat(e[t]))||isNaN(b1=parseFloat(e[n]))?'string'==typeof e[t]?e[t]>e[n].toString()?1:e[t]<e[n].toString()?-1:0:'string'==typeof e[n]?e[t].toString()>e[n]?1:e[t].toString()<e[n]?-1:0:null:o>b1?1:o<b1?-1:0});return e._keys=o,e}},keys:function(t){if(void 0!==t&&null!==t){var n=t._keys||Object.keys(t),o=[];return e.forEach(n,function(e){'_keys'===e||t.hasOwnProperty(e)&&o.push(e)}),o}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace('\'','%27'),t}},join:function(n,o){if(void 0!==n&&null!==n){var s='',r=[],p=null;return o&&o[0]&&(s=o[0]),t('Array',n)?r=n:(p=n._keys||Object.keys(n),e.forEach(p,function(e){'_keys'===e||n.hasOwnProperty(e)&&r.push(n[e])})),r.join(s)}},default:function(t,n){if(void 0!==n&&1<n.length)throw new e.Error('default filter expects one argument');return void 0===t||null===t||''===t?void 0===n?'':n[0]:t},json_encode:function(n){if(void 0===n||null===n)return'null';if('object'==typeof n&&t('Array',n))return s=[],e.forEach(n,function(t){s.push(e.filters.json_encode(t))}),'['+s.join(',')+']';if('object'==typeof n){var o=n._keys||Object.keys(n),s=[];return e.forEach(o,function(t){s.push(JSON.stringify(t)+':'+e.filters.json_encode(n[t]))}),'{'+s.join(',')+'}'}return JSON.stringify(n)},merge:function(n,o){var s=[],r=0,p=[];if(t('Array',n)?e.forEach(o,function(e){t('Array',e)||(s={})}):s={},t('Array',s)||(s._keys=[]),t('Array',n)?e.forEach(n,function(e){s._keys&&s._keys.push(r),s[r]=e,r++}):(p=n._keys||Object.keys(n),e.forEach(p,function(e){s[e]=n[e],s._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=r&&(r=t+1)})),e.forEach(o,function(n){t('Array',n)?e.forEach(n,function(e){s._keys&&s._keys.push(r),s[r]=e,r++}):(p=n._keys||Object.keys(n),e.forEach(p,function(e){s[e]||s._keys.push(e),s[e]=n[e];var t=parseInt(e,10);!isNaN(t)&&t>=r&&(r=t+1)}))}),0===o.length)throw new e.Error('Filter merge expects at least one parameter');return s},date:function(t,n){var o=e.functions.date(t),s=n&&n.length?n[0]:'F j, Y H:i';return e.lib.date(s,o)},date_modify:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||1!==n.length)throw new e.Error('date_modify filter expects 1 argument');var o,s=n[0];return e.lib.is('Date',t)&&(o=e.lib.strtotime(s,t.getTime()/1e3)),e.lib.is('String',t)&&(o=e.lib.strtotime(s,e.lib.strtotime(t))),e.lib.is('Number',t)&&(o=e.lib.strtotime(s,t)),new Date(1e3*o)}},replace:function(t,n){if(void 0!==t&&null!==t){var o,s=n[0];for(o in s)s.hasOwnProperty(o)&&'_keys'!==o&&(t=e.lib.replaceAll(t,o,s[o]));return t}},format:function(t,n){return void 0===t||null===t?void 0:e.lib.vsprintf(t,n)},striptags:function(t){return void 0===t||null===t?void 0:e.lib.strip_tags(t)},escape:function(t,n){if(void 0!==t&&null!==t){var o='html';if(n&&n.length&&!0!==n[0]&&(o=n[0]),'html'==o){var s=t.toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');return e.Markup(s,'html')}if('js'==o){for(var s=t.toString(),r='',p=0;p<s.length;p++)if(s[p].match(/^[a-zA-Z0-9,\._]$/))r+=s[p];else{var i=s.charCodeAt(p);r+=128>i?'\\x'+i.toString(16).toUpperCase():e.lib.sprintf('\\u%04s',i.toString(16).toUpperCase())}return e.Markup(r,'js')}if('css'==o){for(var s=t.toString(),r='',p=0;p<s.length;p++)if(s[p].match(/^[a-zA-Z0-9]$/))r+=s[p];else{var i=s.charCodeAt(p);r+='\\'+i.toString(16).toUpperCase()+' '}return e.Markup(r,'css')}if('url'==o){var r=e.filters.url_encode(t);return e.Markup(r,'url')}if('html_attr'==o){for(var s=t.toString(),r='',p=0;p<s.length;p++)if(s[p].match(/^[a-zA-Z0-9,\.\-_]$/))r+=s[p];else if(s[p].match(/^[&<>"]$/))r+=s[p].replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');else{var i=s.charCodeAt(p);r+=31>=i&&9!=i&&10!=i&&13!=i?'&#xFFFD;':128>i?e.lib.sprintf('&#x%02s;',i.toString(16).toUpperCase()):e.lib.sprintf('&#x%04s;',i.toString(16).toUpperCase())}return e.Markup(r,'html_attr')}throw new e.Error('escape strategy unsupported')}},e:function(t,n){return e.filters.escape(t,n)},nl2br:function(t){if(void 0!==t&&null!==t){var n='BACKSLASH_n_replace',o='<br />'+n;return t=e.filters.escape(t).replace(/\r\n/g,o).replace(/\r/g,o).replace(/\n/g,o),t=e.lib.replaceAll(t,n,'\n'),e.Markup(t)}},number_format:function(e,t){var r=e,p=t&&t[0]?t[0]:void 0,i=t&&void 0!==t[1]?t[1]:'.',a=t&&void 0!==t[2]?t[2]:',';r=(r+'').replace(/[^0-9+\-Ee.]/g,'');var c=isFinite(+r)?+r:0,n=isFinite(+p)?l(p):0,d='';return d=(n?function(e,t){var n=s(10,t);return''+o(e*n)/n}(c,n):''+o(c)).split('.'),3<d[0].length&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(d[1]||'').length<n&&(d[1]=d[1]||'',d[1]+=Array(n-d[1].length+1).join('0')),d.join(i)},trim:function(t,n){if(void 0!==t&&null!==t){var o,s=e.filters.escape(''+t);o=n&&n[0]?''+n[0]:' \n\r\t\f\x0B\xA0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200B\u2028\u2029\u3000';for(var r=0;r<s.length;r++)if(-1===o.indexOf(s.charAt(r))){s=s.substring(r);break}for(r=s.length-1;0<=r;r--)if(-1===o.indexOf(s.charAt(r))){s=s.substring(0,r+1);break}return-1===o.indexOf(s.charAt(0))?s:''}},truncate:function(e,t){var n=30,o=!1,s='...';if(e+='',t&&(t[0]&&(n=t[0]),t[1]&&(o=t[1]),t[2]&&(s=t[2])),e.length>n){if(o&&(n=e.indexOf(' ',n),-1===n))return e;e=e.substr(0,n)+s}return e},slice:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||1>n.length)throw new e.Error('slice filter expects at least 1 argument');var o=n[0]||0,s=1<n.length?n[1]:t.length,p=0<=o?o:r(t.length+o,0);if(e.lib.is('Array',t)){for(var a=[],l=p;l<p+s&&l<t.length;l++)a.push(t[l]);return a}if(e.lib.is('String',t))return t.substr(p,s);throw new e.Error('slice filter expects value to be an array or string')}},abs:function(e){return void 0===e||null===e?void 0:l(e)},first:function(e){if(t('Array',e))return e[0];if(t('Object',e)){if('_keys'in e)return e[e._keys[0]];}else if('string'==typeof e)return e.substr(0,1)},split:function(t,n){if(void 0!==t&&null!==t){if(void 0===n||1>n.length||2<n.length)throw new e.Error('split filter expects 1 or 2 argument');if(e.lib.is('String',t)){var o=n[0],s=n[1],r=t.split(o);if(void 0===s)return r;if(0>s)return t.split(o,r.length+s);var p=[];if(''==o)for(;0<r.length;){for(var a='',l=0;l<s&&0<r.length;l++)a+=r.shift();p.push(a)}else{for(var l=0;l<s-1&&0<r.length;l++)p.push(r.shift());0<r.length&&p.push(r.join(o))}return p}throw new e.Error('split filter expects value to be a string')}},last:function(t){if(e.lib.is('Object',t)){var n;return n=void 0===t._keys?Object.keys(t):t._keys,t[n[n.length-1]]}return t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,n){var o,s,r,p=n.shift(),i=n.shift();if(!e.lib.is('Array',t))throw new e.Error('batch filter expects items to be an array');if(!e.lib.is('Number',p))throw new e.Error('batch filter expects size to be a number');if(p=Math.ceil(p),o=e.lib.chunkArray(t,p),i&&0!=t.length%p){for(s=o.pop(),r=p-s.length;r--;)s.push(i);o.push(s)}return o},round:function(t,n){n=n||[];var o=0<n.length?n[0]:0,r=1<n.length?n[1]:'common';if(t=parseFloat(t),o&&!e.lib.is('Number',o))throw new e.Error('round filter expects precision to be a number');if('common'===r)return e.lib.round(t,o);if(!e.lib.is('Function',Math[r]))throw new e.Error('round filter expects method to be \'floor\', \'ceil\', or \'common\'');return Math[r](t*s(10,o))/s(10,o)}},e.filter=function(t,n,o){if(!e.filters[t])throw'Unable to find filter '+t;return e.filters[t].apply(this,[n,o])},e.filter.extend=function(t,n){e.filters[t]=n},e}},function(n){n.exports=function(o){return o.functions={range:function(t,n,o){var s,r,p,i=[],a=o||1,l=!1;if(isNaN(t)||isNaN(n)?isNaN(t)&&isNaN(n)?(l=!0,s=t.charCodeAt(0),r=n.charCodeAt(0)):(s=isNaN(t)?0:t,r=isNaN(n)?0:n):(s=parseInt(t,10),r=parseInt(n,10)),p=!(s>r),p)for(;s<=r;)i.push(l?e(s):s),s+=a;else for(;s>=r;)i.push(l?e(s):s),s-=a;return i},cycle:function(e,t){var n=t%e.length;return e[n]},dump:function(){var e='\n',t=0,n='',s=Array.prototype.slice.call(arguments),r=function(e){for(var t='';0<e;)e--,t+='  ';return t},p=function(o){n+=r(t),'object'==typeof o?i(o):'function'==typeof o?n+='function()'+e:'string'==typeof o?n+='string('+o.length+') "'+o+'"'+e:'number'==typeof o?n+='number('+o+')'+e:'boolean'==typeof o&&(n+='bool('+o+')'+e)},i=function(o){if(null===o)n+='NULL'+e;else if(void 0===o)n+='undefined'+e;else if('object'==typeof o){for(var s in n+=r(t)+typeof o,t++,n+='('+function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(o)+') {'+e,o)n+=r(t)+'['+s+']=> '+e,p(o[s]);t--,n+=r(t)+'}'+e}else p(o)};return 0==s.length&&s.push(this.context),o.forEach(s,function(e){i(e)}),n},date:function(e){var t;if(void 0===e||null===e||''===e)t=new Date;else if(o.lib.is('Date',e))t=e;else if(o.lib.is('String',e))t=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*o.lib.strtotime(e));else if(o.lib.is('Number',e))t=new Date(1e3*e);else throw new o.Error('Unable to parse date '+e);return t},block:function(e){return this.originalBlockTokens[e]?o.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return o.placeholders.parent},attribute:function(e,t,n){return o.lib.is('Object',e)&&e.hasOwnProperty(t)?'function'==typeof e[t]?e[t].apply(void 0,n):e[t]:e[t]||void 0},max:function(e){return o.lib.is('Object',e)?(delete e._keys,o.lib.max(e)):o.lib.max.apply(null,arguments)},min:function(e){return o.lib.is('Object',e)?(delete e._keys,o.lib.min(e)):o.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=''),o.Templates.parsers.twig({options:this.options,data:e})},random:function(e){function t(e){var t=p(Math.random()*s),n=[0,e],o=Math.min.apply(null,n),i=r.apply(null,n);return o+p((i-o+1)*t/s)}var s=2147483648;if(o.lib.is('Number',e))return t(e);if(o.lib.is('String',e))return e.charAt(t(e.length-1));if(o.lib.is('Array',e))return e[t(e.length-1)];if(o.lib.is('Object',e)){var n=Object.keys(e);return e[n[t(n.length-1)]]}return t(s-1)},source:function(e,s){var r,p,i,a=!1,l='undefined'!=typeof n&&'undefined'!=typeof n.exports&&'undefined'==typeof window;l?(p='fs',i=t+'/'+e):(p='ajax',i=e);var c={id:e,path:i,method:p,parser:'source',async:!1,fetchTemplateSource:!0};'undefined'==typeof s&&(s=!1);try{r=o.Templates.loadRemote(e,c),'undefined'==typeof r||null===r?r='':a=!0}catch(t){o.log.debug('Twig.functions.source: ','Problem loading template  ',t)}return a||s?r:'Template "{name}" is not defined.'.replace('{name}',e)}},o._function=function(e,t,n){if(!o.functions[e])throw'Unable to find function '+e;return o.functions[e](t,n)},o._function.extend=function(e,t){o.functions[e]=t},o}},function(e,t,n){e.exports=function(e){return e.lib={},e.lib.sprintf=n(8),e.lib.vsprintf=n(9),e.lib.round=n(10),e.lib.max=n(11),e.lib.min=n(12),e.lib.strip_tags=n(13),e.lib.strtotime=n(14),e.lib.date=n(15),e.lib.boolval=n(16),e.lib.is=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e},e.lib.copy=function(e){var t,n={};for(t in e)n[t]=e[t];return n},e.lib.extend=function(e,t){var n,o=Object.keys(t);for(n=o.length;n--;)e[o[n]]=t[o[n]];return e},e.lib.replaceAll=function(e,t,n){return e.split(t).join(n)},e.lib.chunkArray=function(t,n){var o=[],s=0,r=t.length;if(1>n||!e.lib.is('Array',t))return[];for(;s<r;)o.push(t.slice(s,s+=n));return o},e}},function(t){'use strict';t.exports=function(){var t=/%%|%(\d+\$)?([-+'#0 ]*)(\*\d+\$|\*|\d+)?(?:\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,n=arguments,s=0,r=n[s++],p=function(e,t,n,o){n||(n=' ');var s=e.length>=t?'':Array(1+t-e.length>>>0).join(n);return o?e+s:s+e},i=function(e,t,n,o,s,r){var i=o-e.length;return 0<i&&(n||!s?e=p(e,o,r,n):e=[e.slice(0,t.length),p('',i,'0',!0),e.slice(t.length)].join('')),e},a=function(e,t,n,o,s,r,a){var l=e>>>0;return n=n&&l&&{2:'0b',8:'0',16:'0x'}[t]||'',e=n+p(l.toString(t),r||0,'0',!1),i(e,n,o,s,a)},c=function(e,t,n,o,s,r){return null!==o&&void 0!==o&&(e=e.slice(0,o)),i(e,'',t,n,s,r)};return r.replace(t,function(t,r,d,u,y,h){var g,m,f,x,b;if('%%'===t)return'%';var k,w=!1,_='',v=!1,T=!1,E=' ',A=d.length;for(k=0;k<A;k++)switch(d.charAt(k)){case' ':_=' ';break;case'+':_='+';break;case'-':w=!0;break;case'\'':E=d.charAt(k+1);break;case'0':v=!0,E='0';break;case'#':T=!0;}if(u=u?'*'===u?+n[s++]:'*'===u.charAt(0)?+n[u.slice(1,-1)]:+u:0,0>u&&(u=-u,w=!0),!isFinite(u))throw new Error('sprintf: (minimum-)width must be finite');return y=y?'*'===y?+n[s++]:'*'===y.charAt(0)?+n[y.slice(1,-1)]:+y:-1<'fFeE'.indexOf(h)?6:'d'===h?0:void 0,b=r?n[r.slice(0,-1)]:n[s++],'s'===h?c(b+'',w,u,y,v,E):'c'===h?c(e(+b),w,u,y,v):'b'===h?a(b,2,T,w,u,y,v):'o'===h?a(b,8,T,w,u,y,v):'x'===h?a(b,16,T,w,u,y,v):'X'===h?a(b,16,T,w,u,y,v).toUpperCase():'u'===h?a(b,10,T,w,u,y,v):'i'===h||'d'===h?(g=+b||0,g=o(g-g%1),m=0>g?'-':_,b=m+p(l(g)+'',y,'0',!1),i(b,m,w,u,v)):'e'===h||'E'===h||'f'===h||'F'===h||'g'===h||'G'===h?(g=+b,m=0>g?'-':_,f=['toExponential','toFixed','toPrecision']['efg'.indexOf(h.toLowerCase())],x=['toString','toUpperCase']['eEfFgG'.indexOf(h)%2],b=m+l(g)[f](y),i(b,m,w,u,v)[x]()):t})}},function(e,t,n){'use strict';e.exports=function(e,t){var o=n(8);return o.apply(this,[e].concat(t))}},function(e){'use strict';e.exports=function(e,t,n){var r,i,a,l;return t|=0,r=s(10,t),e*=r,l=0<e|-(0>e),a=e%1==0.5*l,i=p(e),(a&&(e='PHP_ROUND_HALF_DOWN'===n?i+(0>l):'PHP_ROUND_HALF_EVEN'===n?i+i%2*l:'PHP_ROUND_HALF_ODD'===n?i+!(i%2):i+(0<l)),(a?e:o(e))/r)}},function(e){'use strict';var t='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};e.exports=function(){var e,o,s=0,r=0,n=arguments,p=n.length,a=function(e){if('[object Array]'===Object.prototype.toString.call(e))return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},i=function e(o,s){var r=0,p=0,n=0,i=0,l=0;if(o===s)return 0;if('object'===('undefined'==typeof o?'undefined':t(o))){if('object'===('undefined'==typeof s?'undefined':t(s))){if(o=a(o),s=a(s),l=o.length,i=s.length,i>l)return 1;if(i<l)return-1;for(r=0,p=l;r<p;++r){if(n=e(o[r],s[r]),1===n)return 1;if(-1===n)return-1}return 0}return-1}return'object'===('undefined'==typeof s?'undefined':t(s))?1:isNaN(s)&&!isNaN(o)?0===o?0:0>o?1:-1:isNaN(o)&&!isNaN(s)?0===s?0:0<s?1:-1:s===o?0:s>o?1:-1};if(0===p)throw new Error('At least one value should be passed to max()');else if(1===p){if('object'===t(n[0]))e=a(n[0]);else throw new Error('Wrong parameter count for max()');if(0===e.length)throw new Error('Array must contain at least one element for max()')}else e=n;for(o=e[0],s=1,r=e.length;s<r;++s)1===i(o,e[s])&&(o=e[s]);return o}},function(e){'use strict';var t='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};e.exports=function(){var e,o,s=0,r=0,n=arguments,p=n.length,a=function(e){if('[object Array]'===Object.prototype.toString.call(e))return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},i=function e(o,s){var r=0,p=0,n=0,i=0,l=0;if(o===s)return 0;if('object'===('undefined'==typeof o?'undefined':t(o))){if('object'===('undefined'==typeof s?'undefined':t(s))){if(o=a(o),s=a(s),l=o.length,i=s.length,i>l)return 1;if(i<l)return-1;for(r=0,p=l;r<p;++r){if(n=e(o[r],s[r]),1===n)return 1;if(-1===n)return-1}return 0}return-1}return'object'===('undefined'==typeof s?'undefined':t(s))?1:isNaN(s)&&!isNaN(o)?0===o?0:0>o?1:-1:isNaN(o)&&!isNaN(s)?0===s?0:0<s?1:-1:s===o?0:s>o?1:-1};if(0===p)throw new Error('At least one value should be passed to min()');else if(1===p){if('object'===t(n[0]))e=a(n[0]);else throw new Error('Wrong parameter count for min()');if(0===e.length)throw new Error('Array must contain at least one element for min()')}else e=n;for(o=e[0],s=1,r=e.length;s<r;++s)-1===i(o,e[s])&&(o=e[s]);return o}},function(e){'use strict';e.exports=function(e,t){t=(((t||'')+'').toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(o,'').replace(n,function(e,n){return-1<t.indexOf('<'+n.toLowerCase()+'>')?e:''})}},function(e){'use strict';e.exports=function(e,t){function n(e,t,n){var o,s=c[t];'undefined'!=typeof s&&(o=s-l.getDay(),0===o?o=7*n:0<o&&'last'===e?o-=7:0>o&&'next'===e&&(o+=7),l.setDate(l.getDate()+o))}function o(e){var t=e.split(' '),o=t[0],s=t[1].substring(0,3),r=/\d+/.test(o),p='ago'===t[2],i=('last'===o?-1:1)*(p?-1:1);if(r&&(i*=parseInt(o,10)),d.hasOwnProperty(s)&&!t[1].match(/^mon(day|\.)?$/i))return l['set'+d[s]](l['get'+d[s]]()+i);if('wee'===s)return l.setDate(l.getDate()+7*i);if('next'===o||'last'===o)n(o,s,i);else if(!r)return!1;return!0}var s,r,p,a,l,c,d,u,y,h,g,i=!1;if(!e)return i;e=e.replace(/^\s+|\s+$/g,'').replace(/\s{2,}/g,' ').replace(/[\t\r\n]/g,'').toLowerCase();var m=/^(\d{1,4})([\-\.\/:])(\d{1,2})([\-\.\/:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/;if(r=e.match(m),r&&r[2]===r[4])if(1901<r[1])switch(r[2]){case'-':return 12<r[3]||31<r[5]?i:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case'.':return i;case'/':return 12<r[3]||31<r[5]?i:new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;}else if(1901<r[5])switch(r[2]){case'-':return 12<r[3]||31<r[1]?i:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case'.':return 12<r[3]||31<r[1]?i:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case'/':return 12<r[1]||31<r[3]?i:new Date(r[5],parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;}else switch(r[2]){case'-':return 12<r[3]||31<r[5]||70>r[1]&&38<r[1]?i:(a=0<=r[1]&&38>=r[1]?+r[1]+2e3:r[1],new Date(a,parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case'.':return 70<=r[5]?12<r[3]||31<r[1]?i:new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3:60>r[5]&&!r[6]&&(23<r[1]||59<r[3]?i:(p=new Date,new Date(p.getFullYear(),p.getMonth(),p.getDate(),r[1]||0,r[3]||0,r[5]||0,r[9]||0)/1e3));case'/':return 12<r[1]||31<r[3]||70>r[5]&&38<r[5]?i:(a=0<=r[5]&&38>=r[5]?+r[5]+2e3:r[5],new Date(a,parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case':':return 23<r[1]||59<r[3]||59<r[5]?i:(p=new Date,new Date(p.getFullYear(),p.getMonth(),p.getDate(),r[1]||0,r[3]||0,r[5]||0)/1e3);}if('now'===e)return null===t||isNaN(t)?0|new Date().getTime()/1e3:0|t;if(!isNaN(s=Date.parse(e)))return 0|s/1e3;if(m=/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/,r=e.match(m),r&&('z'===r[4]?r[4]='Z':r[4].match(/^([+-][0-9]{2})$/)&&(r[4]+=':00'),!isNaN(s=Date.parse(r[1]+'T'+r[2]+r[4]))))return 0|s/1e3;if(l=t?new Date(1e3*t):new Date,c={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},d={yea:'FullYear',mon:'Month',day:'Date',hou:'Hours',min:'Minutes',sec:'Seconds'},y='(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)',h='([+-]?\\d+\\s'+y+'|(last|next)\\s'+y+')(\\sago)?',r=e.match(new RegExp(h,'gi')),!r)return i;for(g=0,u=r.length;g<u;g++)if(!o(r[g]))return i;return l.getTime()/1e3}},function(e){'use strict';e.exports=function(e,t){var n,r,s=['Sun','Mon','Tues','Wednes','Thurs','Fri','Satur','January','February','March','April','May','June','July','August','September','October','November','December'],i=/\\?(.?)/gi,a=function(e,t){return r[e]?r[e]():t},c=function(e,t){for(e+='';e.length<t;)e='0'+e;return e};r={d:function(){return c(r.j(),2)},D:function(){return r.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return s[r.w()]+'day'},N:function(){return r.w()||7},S:function(){var e=r.j(),t=e%10;return 3>=t&&1===parseInt(e%100/10,10)&&(t=0),['st','nd','rd'][t-1]||'th'},w:function(){return n.getDay()},z:function(){var e=new Date(r.Y(),r.n()-1,r.j()),t=new Date(r.Y(),0,1);return o((e-t)/864e5)},W:function(){var e=new Date(r.Y(),r.n()-1,r.j()-r.N()+3),t=new Date(e.getFullYear(),0,4);return c(1+o((e-t)/864e5/7),2)},F:function(){return s[6+r.n()]},m:function(){return c(r.n(),2)},M:function(){return r.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(r.Y(),r.n(),0).getDate()},L:function(){var e=r.Y();return 0==e%4&0!=e%100|0==e%400},o:function(){var e=r.n(),t=r.W(),n=r.Y();return n+(12===e&&9>t?1:1===e&&9<t?-1:0)},Y:function(){return n.getFullYear()},y:function(){return r.Y().toString().slice(-2)},a:function(){return 11<n.getHours()?'pm':'am'},A:function(){return r.a().toUpperCase()},B:function(){var e=3600*n.getUTCHours(),t=60*n.getUTCMinutes(),o=n.getUTCSeconds();return c(p((e+t+o+3600)/86.4)%1e3,3)},g:function(){return r.G()%12||12},G:function(){return n.getHours()},h:function(){return c(r.g(),2)},H:function(){return c(r.G(),2)},i:function(){return c(n.getMinutes(),2)},s:function(){return c(n.getSeconds(),2)},u:function(){return c(1e3*n.getMilliseconds(),6)},e:function(){throw new Error('Not supported (see source code of date() for timezone on how to add support)')},I:function(){var e=new Date(r.Y(),0),t=Date.UTC(r.Y(),0),n=new Date(r.Y(),6),o=Date.UTC(r.Y(),6);return e-t==n-o?0:1},O:function(){var e=n.getTimezoneOffset(),t=l(e);return(0<e?'-':'+')+c(100*p(t/60)+t%60,4)},P:function(){var e=r.O();return e.substr(0,3)+':'+e.substr(3,2)},T:function(){return'UTC'},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return'Y-m-d\\TH:i:sP'.replace(i,a)},r:function(){return'D, d M Y H:i:s O'.replace(i,a)},U:function(){return 0|n/1e3}};return function(e,t){return n=void 0===t?new Date:t instanceof Date?new Date(t):new Date(1e3*t),e.replace(i,a)}(e,t)}},function(e){'use strict';e.exports=function(e){return!1!==e&&(0===e||0===e?!1:''===e||'0'===e?!1:Array.isArray(e)&&0===e.length?!1:null===e||void 0===e?!1:!0)}},function(e){e.exports=function(e){'use strict';e.Templates.registerLoader('ajax',function(t,n,o,s){var r,p,i=n.precompiled,a=this.parsers[n.parser]||this.parser.twig;if('undefined'==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return p=new XMLHttpRequest,p.onreadystatechange=function(){var l=null;4===p.readyState&&(200===p.status||window.cordova&&0==p.status?(e.log.debug('Got template ',p.responseText),l=!0===i?JSON.parse(p.responseText):p.responseText,n.url=t,n.data=l,r=a.call(this,n),'function'==typeof o&&o(r)):'function'==typeof s&&s(p))},p.open('GET',t,!!n.async),p.send(),!!n.async||r})}},function(e,t,n){e.exports=function(e){'use strict';var t,o;try{t=n(19),o=n(20)}catch(t){}e.Templates.registerLoader('fs',function(n,s,r,p){var i,a=null,l=s.precompiled,c=this.parsers[s.parser]||this.parser.twig;if(!t||!o)throw new e.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var d=function(e,t){return e?void('function'==typeof p&&p(e)):void(!0===l&&(t=JSON.parse(t)),s.data=t,s.path=s.path||n,i=c.call(this,s),'function'==typeof r&&r(i))};if(s.path=s.path||n,s.async)return t.stat(s.path,function(n,o){return n||!o.isFile()?void('function'==typeof p&&p(new e.Error('Unable to find template file '+s.path))):void t.readFile(s.path,'utf8',d)}),!0;try{if(!t.statSync(s.path).isFile())throw new e.Error('Unable to find template file '+s.path)}catch(t){throw new e.Error('Unable to find template file '+s.path)}return a=t.readFileSync(s.path,'utf8'),d(void 0,a),i})}},function(e){e.exports=n(0)},function(e){e.exports=n(1)},function(e){e.exports=function(e){'use strict';for(e.logic={},e.logic.type={if_:'Twig.logic.type.if',endif:'Twig.logic.type.endif',for_:'Twig.logic.type.for',endfor:'Twig.logic.type.endfor',else_:'Twig.logic.type.else',elseif:'Twig.logic.type.elseif',set:'Twig.logic.type.set',setcapture:'Twig.logic.type.setcapture',endset:'Twig.logic.type.endset',filter:'Twig.logic.type.filter',endfilter:'Twig.logic.type.endfilter',shortblock:'Twig.logic.type.shortblock',block:'Twig.logic.type.block',endblock:'Twig.logic.type.endblock',extends_:'Twig.logic.type.extends',use:'Twig.logic.type.use',include:'Twig.logic.type.include',spaceless:'Twig.logic.type.spaceless',endspaceless:'Twig.logic.type.endspaceless',macro:'Twig.logic.type.macro',endmacro:'Twig.logic.type.endmacro',import_:'Twig.logic.type.import',from:'Twig.logic.type.from',embed:'Twig.logic.type.embed',endembed:'Twig.logic.type.endembed'},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var n=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,o){var s=this;return e.expression.parseAsync.apply(this,[t.stack,n]).then(function(r){return o=!0,e.lib.boolval(r)?(o=!1,e.parseAsync.apply(s,[t.output,n])):''}).then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var n=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,o){var s=this;return e.expression.parseAsync.apply(this,[t.stack,n]).then(function(r){return o&&e.lib.boolval(r)?(o=!1,e.parseAsync.apply(s,[t.output,n])):''}).then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,n,o){var s=e.Promise.resolve('');return o&&(s=e.parseAsync.apply(this,[t.output,n])),s.then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var n=t.match[1],o=t.match[2],s=t.match[3],r=null;if(t.key_var=null,t.value_var=null,!(0<=n.indexOf(',')))t.value_var=n;else if(r=n.split(','),2===r.length)t.key_var=r[0].trim(),t.value_var=r[1].trim();else throw new e.Error('Invalid expression in for loop: '+n);return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,s&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s}]).stack),delete t.match,t},parse:function(t,n,o){var s,r,p=[],i=0,a=this,l=t.conditional,c=function(e,t){var o=void 0!==l;return{index:e+1,index0:e,revindex:o?void 0:t-e,revindex0:o?void 0:t-e-1,first:0===e,last:o?void 0:e===t-1,length:o?void 0:t,parent:n}},d=function(o,r){var d=e.ChildContext(n);d[t.value_var]=r,t.key_var&&(d[t.key_var]=o),d.loop=c(i,s);var u=void 0===l?e.Promise.resolve(!0):e.expression.parseAsync.apply(a,[l,d]);u.then(function(n){return n?e.parseAsync.apply(a,[t.output,d]).then(function(e){p.push(e),i+=1}):void 0}).then(function(){delete d.loop,delete d[t.value_var],delete d[t.key_var],e.merge(n,d,!0)})};return e.expression.parseAsync.apply(this,[t.expression,n]).then(function(t){return e.lib.is('Array',t)?(s=t.length,e.async.forEach(t,function(e){var t=i;return d(t,e)})):e.lib.is('Object',t)&&(r=void 0===t._keys?Object.keys(t):t._keys,s=r.length,e.forEach(r,function(e){'_keys'===e||d(e,t[e])})),o=0===p.length,{chain:o,output:e.output.apply(a,[p])}})}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim(),o=t.match[2],s=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack;return t.key=n,t.expression=s,delete t.match,t},parse:function(t,n,o){var s=t.key;return e.expression.parseAsync.apply(this,[t.expression,n]).then(function(t){return t===n&&(t=e.lib.copy(t)),n[s]=t,{chain:o,context:n}})}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,n,o){var s=this,r=t.key;return e.parseAsync.apply(this,[t.output,n]).then(function(e){return s.context[r]=e,n[r]=e,{chain:o,context:n}})}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var n='|'+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,delete t.match,t},parse:function(t,n,o){return e.parseAsync.apply(this,[t.output,n]).then(function(o){var s=[{type:e.expression.type.string,value:o}].concat(t.stack);return e.expression.parseAsync.apply(that,[s,n])}).then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,n,o){var s,r=this,p=e.Promise.resolve(),i=-1<e.indexOf(this.importedBlocks,t.block),a=this.blocks[t.block]&&-1<e.indexOf(this.blocks[t.block],e.placeholders.parent);return(void 0===this.blocks[t.block]||i||a||n.loop||t.overwrite)&&(p=t.expression?e.expression.parseAsync.apply(this,[t.output,n]).then(function(t){return e.expression.parseAsync.apply(r,[{type:e.expression.type.string,value:t},n])}):e.parseAsync.apply(this,[t.output,n]).then(function(t){return e.expression.parseAsync.apply(r,[{type:e.expression.type.string,value:t},n])}),p=p.then(function(n){i&&r.importedBlocks.splice(r.importedBlocks.indexOf(t.block),1),r.blocks[t.block]=a?e.Markup(r.blocks[t.block].replace(e.placeholders.parent,n)):n,r.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}})),p.then(function(){return s=r.child.blocks[t.block]?r.child.blocks[t.block]:r.blocks[t.block],{chain:o,output:s}})}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,o){var s,r=this,p=e.ChildContext(n);return e.expression.parseAsync.apply(this,[t.stack,n]).then(function(t){return r.extend=t,s=t instanceof e.Template?t:r.importFile(t),s.renderAsync(p)}).then(function(){return e.lib.extend(n,p),{chain:o,output:''}})}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,o){var s=this;return e.expression.parseAsync.apply(this,[t.stack,n]).then(function(e){return s.importBlocks(e),{chain:o,output:''}})}},{type:e.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(t){var n=t.match,o=n[1].trim(),s=void 0!==n[2],r=n[3],p=void 0!==n[4]&&n[4].length;return delete t.match,t.only=p,t.ignoreMissing=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,void 0!==r&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r.trim()}]).stack),t},parse:function(t,n,o){var s,r,p={},i=this,a=e.Promise.resolve();return t.only||(p=e.ChildContext(n)),void 0!==t.withStack&&(a=e.expression.parseAsync.apply(this,[t.withStack,n]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(p[s]=e[s])})),a.then(function(){return e.expression.parseAsync.apply(i,[t.stack,n])}).then(function(n){if(n instanceof e.Template)r=n;else try{r=i.importFile(n)}catch(e){if(t.ignoreMissing)return'';throw e}return r.renderAsync(p)}).then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,n,o){return e.parseAsync.apply(this,[t.output,n]).then(function(t){var n=/>\s+</g,s=t.replace(n,'><').trim();return s=e.Markup(s),{chain:o,output:s}})}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var n=t.match[1],o=t.match[2].split(/[\s,]+/),s=0;s<o.length;s++)for(var r=0;r<o.length;r++)if(o[s]===o[r]&&s!==r)throw new e.Error('Duplicate arguments for parameter: '+o[s]);return t.macroName=n,t.parameters=o,delete t.match,t},parse:function(t,n,o){var s=this;return this.macros[t.macroName]=function(){for(var n,o={_self:s.macros},r=0;r<t.parameters.length;r++)n=t.parameters[r],o[n]='undefined'==typeof arguments[r]?void 0:arguments[r];return e.parseAsync.apply(s,[t.output,o])},{chain:o,output:''}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var n=t.match[1].trim(),o=t.match[2].trim();return delete t.match,t.expression=n,t.contextName=o,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,o){var s=this,r={chain:o,output:''};return'_self'===t.expression?(n[t.contextName]=this.macros,e.Promise.resolve(r)):e.expression.parseAsync.apply(this,[t.stack,n]).then(function(e){return s.importFile(e||t.expression)}).then(function(e){return n[t.contextName]=e.renderAsync({},{output:'macros'}),r})}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var n=t.match[1].trim(),o=t.match[2].trim().split(/\s*,\s*/),s={},r=0;r<o.length;r++){var p=o[r],i=p.match(/^([a-zA-Z0-9_]+)\s+as\s+([a-zA-Z0-9_]+)$/);i?s[i[1].trim()]=i[2].trim():p.match(/^([a-zA-Z0-9_]+)$/)&&(s[p]=p)}return delete t.match,t.expression=n,t.macroNames=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,t},parse:function(t,n,o){var s=this,r=e.Promise.resolve(this.macros);return'_self'!==t.expression&&(r=e.expression.parseAsync.apply(this,[t.stack,n]).then(function(e){return s.importFile(e||t.expression)}).then(function(e){return e.renderAsync({},{output:'macros'})})),r.then(function(e){for(var s in t.macroNames)e.hasOwnProperty(s)&&(n[t.macroNames[s]]=e[s]);return{chain:o,output:''}})}},{type:e.logic.type.embed,regex:/^embed\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var n=t.match,o=n[1].trim(),s=void 0!==n[2],r=n[3],p=void 0!==n[4]&&n[4].length;return delete t.match,t.only=p,t.ignoreMissing=s,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack,void 0!==r&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r.trim()}]).stack),t},parse:function(t,n,o){var s,r,p={},i=this,a=e.Promise.resolve();if(!t.only)for(s in n)n.hasOwnProperty(s)&&(p[s]=n[s]);return void 0!==t.withStack&&(a=e.expression.parseAsync.apply(this,[t.withStack,n]).then(function(e){for(s in e)e.hasOwnProperty(s)&&(p[s]=e[s])})),a.then(function(){return e.expression.parseAsync.apply(i,[t.stack,p])}).then(function(n){if(n instanceof e.Template)r=n;else try{r=i.importFile(n)}catch(e){if(t.ignoreMissing)return'';throw e}return i.blocks={},e.parseAsync.apply(i,[t.output,p]).then(function(){return r.renderAsync(p,{blocks:i.blocks})})}).then(function(e){return{chain:o,output:e}})}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,n){n=n||'Twig.logic.type'+t,e.logic.type[t]=n},e.logic.extend=function(t){if(!t.type)throw new e.Error('Unable to extend logic definition. No type provided for '+t);else e.logic.extendType(t.type);e.logic.handler[t.type]=t};0<e.logic.definitions.length;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var n=t.value.trim(),o=e.logic.tokenize.apply(this,[n]),s=e.logic.handler[o.type];return s.compile&&(o=s.compile.apply(this,[o]),e.log.trace('Twig.logic.compile: ','Compiled logic token to ',o)),o},e.logic.tokenize=function(t){var n={},o=null,s=null,r=null,p=null,i=null,a=null;for(o in t=t.trim(),e.logic.handler)if(e.logic.handler.hasOwnProperty(o))for(s=e.logic.handler[o].type,r=e.logic.handler[o].regex,p=[],r instanceof Array?p=r:p.push(r);0<p.length;)if(i=p.shift(),a=i.exec(t.trim()),null!==a)return n.type=s,n.match=a,e.log.trace('Twig.logic.tokenize: ','Matched a ',s,' regular expression of ',a),n;throw new e.Error('Unable to parse \''+t.trim()+'\'')},e.logic.parse=function(t,n,o,s){var r,p,i='',a=!0;if(n=n||{},e.log.debug('Twig.logic.parse: ','Parsing logic token ',t),p=e.logic.handler[t.type],p.parse&&(i=p.parse.apply(this,[t,n,o])),r=e.isPromise(i)?i:e.Promise.resolve(i),r.then(function(e){a=!1,i=e}),s)return r||e.Promise.resolve(i);if(a)throw new e.Error('You are using Twig.js in sync mode in combination with async extensions.');return i},e}},function(e){e.exports=function(e){'use strict';e.Templates.registerParser('source',function(e){return e.data||''})}},function(e){e.exports=function(e){'use strict';e.Templates.registerParser('twig',function(t){return new e.Template(t)})}},function(e,t,n){e.exports=function(e){'use strict';return e.path={},e.path.parsePath=function(t,n){var o=null,n=n||'';if('object'==typeof t&&'object'==typeof t.options&&(o=t.options.namespaces),'object'==typeof o&&0<n.indexOf('::')||0<=n.indexOf('@')){for(var s in o)o.hasOwnProperty(s)&&(n=n.replace(s+'::',o[s]),n=n.replace('@'+s,o[s]));return n}return e.path.relativePath(t,n)},e.path.relativePath=function(t,o){var s,r,p,i='/',a=[],o=o||'';if(t.url)s='undefined'==typeof t.base?t.url:t.base+('/'===t.base.charAt(t.base.length-1)?'':'/');else if(t.path){var l=n(20),c=l.sep||i,d=new RegExp('^\\.{1,2}'+c.replace('\\','\\\\'));o=o.replace(/\//g,c),void 0!==t.base&&null==o.match(d)?(o=o.replace(t.base,''),s=t.base+c):s=l.normalize(t.path),s=s.replace(c+c,c),i=c}else if((t.name||t.id)&&t.method&&'fs'!==t.method&&'ajax'!==t.method)s=t.base||t.name||t.id;else throw new e.Error('Cannot extend an inline template.');for(r=s.split(i),r.pop(),r=r.concat(o.split(i));0<r.length;)p=r.shift(),'.'==p||('..'==p&&0<a.length&&'..'!=a[a.length-1]?a.pop():a.push(p));return a.join(i)},e}},function(e){e.exports=function(e){'use strict';return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if('number'==typeof e)return!1;if(e.length&&0<e.length)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return 1==e%2},even:function(e){return 0==e%2},divisibleby:function(e,t){return 0==e%t[0]},defined:function(e){return void 0!==e},none:function(e){return null===e},null:function(e){return this.none(e)},"same as":function(e,t){return e===t[0]},sameas:function(t,n){return console.warn('`sameas` is deprecated use `same as`'),e.tests['same as'](t,n)},iterable:function(t){return t&&(e.lib.is('Array',t)||e.lib.is('Object',t))}},e.test=function(t,n,o){if(!e.tests[t])throw'Test '+t+' is not defined.';return e.tests[t](n,o)},e.test.extend=function(t,n){e.tests[t]=n},e}},function(e){e.exports=function(t){'use strict';return t.parseAsync=function(e,n){return t.parse.apply(this,[e,n,!0])},t.expression.parseAsync=function(e,n,o){return t.expression.parse.apply(this,[e,n,o,!0])},t.logic.parseAsync=function(e,n,o){return t.logic.parse.apply(this,[e,n,o,!0])},t.Template.prototype.renderAsync=function(e,t){return this.render(e,t,!0)},t.async={},t.isPromise=function(e){return e&&'function'==typeof e.then},t.Promise=function(e){function n(e,t){l=e,c=t,r()}function o(e){n('resolve',e)}function s(t){n('reject',t)}function r(){d&&(t.forEach(d,function(e){p(e.resolve,e.reject)}),d=null)}function p(e,t){var n={resolve:e,reject:t};return'unknown'==l?(d=d||[],d.push(n)):void(n[l]&&n[l](c))}function i(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(t){o||(o=!0,n(t))})}catch(t){o=!0,n(t)}}function a(e){try{if(!t.isPromise(e))return o(e);i(e.then.bind(e),a,s)}catch(t){s(t)}}var l='unknown',c=null,d=null;return i(e,a,s),{then:function(e,n){return new t.Promise(function(t,o){p(function(n){if('function'==typeof e)try{t(e(n))}catch(t){o(t)}else t(n)},function(e){if('function'==typeof n)try{t(n(e))}catch(t){o(t)}else o(e)})})},catch:function(e){return this.then(null,e)}}},t.Promise.resolve=function(e){return new t.Promise(function(t){t(e)})},t.Promise.reject=function(n){return new t.Promise(function(e,t){t(n)})},t.Promise.all=function(e){var n=[];return t.async.forEach(e,function(e,o){return t.isPromise(e)?e.then(function(e){n[o]=e}):void(n[o]=e)}).then(function(){return n})},t.async.forEach=function(e,n){function o(e){i.reject(e)}function s(e){return t.isPromise(e)?void e.then(s,o):r()}function r(){var t=p++;return t==e.length?void i.resolve():void s(n(e[t],t))}var p=0,i={},a=new t.Promise(function(e,t){i={resolve:e,reject:t}});return r(),a},t}},function(e){e.exports=function(e){'use strict';return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var n=t.id,o={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&n&&e.validateId(n),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty('path')?t.path:void 0,module:t.module,id:n,options:o});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error('Both ref and id cannot be set on a twig.js template.');return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||n||void 0,{id:n,method:t.method,parser:t.parser||'twig',base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error)}return void 0===t.href?void 0===t.path?void 0:e.Templates.loadRemote(t.path,{id:n,method:'fs',parser:t.parser||'twig',base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error):e.Templates.loadRemote(t.href,{id:n,method:'ajax',parser:t.parser||'twig',base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:o},t.load,t.error)},e.exports.extendFilter=function(t,n){e.filter.extend(t,n)},e.exports.extendFunction=function(t,n){e._function.extend(t,n)},e.exports.extendTest=function(t,n){e.test.extend(t,n)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,n){var o,s=n.filename,r=n.filename;return o=new e.Template({data:t,path:r,id:s,options:n.settings['twig options']}),function(e){return o.render(e)}},e.exports.renderFile=function(t,n,o){'function'==typeof n&&(o=n,n={}),n=n||{};var s=n.settings||{},r={path:t,base:s.views,load:function(e){o(null,''+e.render(n))}},p=s['twig options'];if(p)for(var i in p)p.hasOwnProperty(i)&&(r[i]=p[i]);e.exports.twig(r)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e.exports.filters=e.filters,e}}])})}).call(t,'/')},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function r(){h&&u&&(h=!1,u.length?y=u.concat(y):g=-1,y.length&&p())}function p(){if(!h){var e=o(r);h=!0;for(var t=y.length;t;){for(u=y,y=[];++g<t;)u&&u[g].run();g=-1,t=y.length}u=null,h=!1,s(e)}}function a(e,t){this.fun=e,this.array=t}function i(){}var l,c,d=e.exports={};(function(){try{l='function'==typeof setTimeout?setTimeout:t}catch(n){l=t}try{c='function'==typeof clearTimeout?clearTimeout:n}catch(t){c=n}})();var u,y=[],h=!1,g=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];y.push(new a(e,t)),1!==y.length||h||o(p)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title='browser',d.browser=!0,d.env={},d.argv=[],d.version='',d.versions={},d.on=i,d.addListener=i,d.once=i,d.off=i,d.removeListener=i,d.removeAllListeners=i,d.emit=i,d.prependListener=i,d.prependOnceListener=i,d.listeners=function(){return[]},d.binding=function(){throw new Error('process.binding is not supported')},d.cwd=function(){return'/'},d.chdir=function(){throw new Error('process.chdir is not supported')},d.umask=function(){return 0}},function(e){e.exports='<style>.wrapper {\n  position: relative; }\n  .wrapper .media img {\n    max-width: 100%; }\n  .wrapper .inner {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    white-space: nowrap;\n    padding: 2rem;\n    font-family: var(--font, Helvetica, Arial, sans-serif);\n    align-items: center; }\n    .wrapper .inner.left {\n      align-items: flex-start; }\n    .wrapper .inner.right {\n      align-items: flex-end; }\n    .wrapper .inner * {\n      margin: .5rem 0 .5rem 0; }\n    .wrapper .inner h1 {\n      color: var(--text-color, white); }\n    .wrapper .inner p {\n      color: var(--subtext-color, white); }\n    .wrapper .inner a {\n      color: var(--callout-color, white);\n      border: 1px solid var(--callout-color, white);\n      text-decoration: none;\n      padding: 1em;\n      transition: all .2s; }\n      .wrapper .inner a:hover {\n        background-color: var(--callout-color, white);\n        color: var(--callout-hover-color, black); }\n</style>\n<div class="wrapper">\n  <div class="media">\n  {% if src %}\n    <img src="{{ src | escape }}" />\n  {% else %}\n    <slot name="media"></slot>\n  {% endif %}\n  </div>\n  <div class="inner {{ align | escape }}">\n    {% if text %}\n      <h1>{{ text | escape }}</h1>\n    {% endif %}\n    {% if subtext %}\n      <p>{{ subtext | escape }}</p>\n    {% endif %}\n    {% if callout_href and callout_text %}\n      <a href="{{ callout_href | escape }}">{{ callout_text | escape }}</a>\n    {% endif %}\n  </div>\n</div>\n'}]);